{% extends 'garpixcms/base.html' %}

{% block content %}
    <h1>{{ object.title }}</h1>

    <form method="get" action="">
        <div class="form-group">
            <label for="from">Дата начала периода</label>
            <input type="date" class="form-control" name="from" id="from" value="{{ date_from|date:"Y-m-d" }}" placeholder="Дата начала периода">
        </div>
        <div class="form-group">
            <label for="to">Дата конца периода</label>
            <input type="date" class="form-control" name="to" id="to" value="{{ date_to|date:"Y-m-d" }}" placeholder="Дата конца периода">
        </div>
        <button type="submit" class="btn btn-primary">Применить</button>
    </form>

    <div style="overflow-x: scroll;">
        <table border="1" style="margin: 10px;">
            <thead>
            <tr>
                <th>ФИО</th>
                <th>Итого за период</th>
                {% for date in dates %}
                    <th>{{ date|date:"d.m.Y" }}</th>
                {% endfor %}
            </tr>
            </thead>
            <tbody>
            {% for row in data %}
                <tr>
                    {% for col in row %}
                        <td>
                            {% if forloop.counter > 2 %}
                                {% if col.value == 0 %}
                                    <div style="background: red;">{% include 'garpix_jira/include/worklog_table_cell.html' with cell=col %}</div>
                                {% else %}
                                    {% if col.value > 6 %}
                                        <div>{% include 'garpix_jira/include/worklog_table_cell.html' with cell=col %}</div>
                                    {% else %}
                                        <div style="background: yellow;">{% include 'garpix_jira/include/worklog_table_cell.html' with cell=col %}</div>
                                    {% endif %}
                                {% endif %}
                            {% else %}
                                {{ col }}
                            {% endif %}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>


{% endblock %}